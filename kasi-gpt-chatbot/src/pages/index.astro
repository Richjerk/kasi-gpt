---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout>
  <section id="home" class="bg-yellow-100 p-8 text-center">
    <h1 class="text-5xl font-bold text-gray-800">Welcome to Township Small Business Directory</h1>
    <p class="mt-4 text-lg text-gray-600">Connect with local businesses and explore their services!</p>
  </section>

  <section id="services" class="bg-white p-8 shadow-md rounded-lg mt-6">
    <h2 class="text-3xl font-semibold text-gray-800">List Your Business</h2>
    <form id="business-form" class="space-y-4 mt-4">
      <input
        type="text"
        placeholder="Business Name"
        class="p-3 border border-gray-300 rounded w-full focus:outline-none focus:ring-2 focus:ring-yellow-500"
        required
      />
      <textarea
        placeholder="Business Description"
        class="p-3 border border-gray-300 rounded w-full focus:outline-none focus:ring-2 focus:ring-yellow-500"
        required
      ></textarea>
      <input
        type="file"
        accept="image/*"
        class="p-3 border border-gray-300 rounded w-full focus:outline-none focus:ring-2 focus:ring-yellow-500"
      />
      <input
        type="email"
        placeholder="Business Email"
        class="p-3 border border-gray-300 rounded w-full focus:outline-none focus:ring-2 focus:ring-yellow-500"
        required
      />
      <input
        type="tel"
        placeholder="Business Phone"
        class="p-3 border border-gray-300 rounded w-full focus:outline-none focus:ring-2 focus:ring-yellow-500"
        required
      />
      <input
        type="text"
        placeholder="Business Address"
        class="p-3 border border-gray-300 rounded w-full focus:outline-none focus:ring-2 focus:ring-yellow-500"
        required
      />
      <button
        type="submit"
        class="w-full bg-yellow-500 text-white p-3 rounded hover:bg-yellow-600 transition duration-300"
      >
        Submit
      </button>
    </form>
  </section>

  <section id="contact" class="bg-white p-8 shadow-md rounded-lg mt-6">
    <h2 class="text-3xl font-semibold text-gray-800">Contact Us</h2>
    <p class="mt-2 text-gray-600">If you have any questions, feel free to reach out!</p>
  </section>

  <section id="about" class="bg-white p-8 shadow-md rounded-lg mt-6">
    <h2 class="text-3xl font-semibold text-gray-800">About Us</h2>
    <p class="mt-2 text-gray-600">We aim to empower township businesses by connecting them with their community.</p>
  </section>

  <footer class="bg-gray-800 text-white p-4 text-center mt-6">
    <p>&copy; 2024 Mafisa Tech Affiliate Pty Ltd. All rights reserved.</p>
  </footer>

  <script>
    // Enable GPS Geo-location tracking
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        console.log('Latitude: ' + position.coords.latitude);
        console.log('Longitude: ' + position.coords.longitude);
      });
    } else {
      console.log("Geolocation is not supported by this browser.");
    }

    // Handle form submission
    document.getElementById('business-form').addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent default form submission

      const formData = new FormData(this); // Get form data

      // Make an API call to submit the form data
      fetch('/api/businesses', {
        method: 'POST',
        body: formData
      })
      .then(response => response.json())
      .then(data => {
        console.log('Success:', data);
        alert('Business listed successfully!');
        this.reset(); // Reset the form
      })
      .catch((error) => {
        console.error('Error:', error);
        alert('There was an error listing your business.');
      });
    });
  </script>
</BaseLayout>
